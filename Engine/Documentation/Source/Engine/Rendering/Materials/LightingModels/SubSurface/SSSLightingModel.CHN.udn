INTSourceChangelist:2691837
Availability:Public
Title:次表面明暗处理模型
Crumbs:%ROOT%, Engine, Engine/Rendering/Materials
Description:材质中可用的次表面明暗处理模型的说明及技术细节。
Version:4.9

材质具有一种新的次表面明暗处理模型 (**_MLM_Subsurface_**)，后者适用于蜡或翡翠等表现为不透明，但光线会在其内部散射，使得部分光线从表面的对面穿透出来的材质。

![翡翠材质](Engine/Rendering/Overview/jade_statue.png)(w:588) ![冰材质](Engine/Rendering/Overview/ice_mounds.png)(w:588)

次表面散射 (SSS) 通常用来为人类或其他生物创建逼真的皮肤；但是，此明暗处理模型的效果的质量欠佳，而且成本低于通常用于皮肤渲染的模型。

## 技术细节

次表面光线的两个成分分别是环绕型的“N 点 H”和光线反向散射，后者在光线投射于 SSS 对象的另一面时显示。这两者都由指数阴影贴图所产生的半透明自身阴影屏蔽。

## 材质输入通道

“次表面颜色”（SubsurfaceColor）输入通道用于定义材质内影响 SSS 照明的颜色。

当材质使用次表面散射和 _MLM_Subsurface_ 明暗处理模型时，材质的“不透明”（Opacity）通道的含义略有不同。因为这些类型的表面完全不透明，所以“不透明”（Opacity）在这种情况下用于控制材质散射光线时的密度以及：

* 法线纹理影响次表面光线的程度，材质越不透明，法线纹理的影响越大。
* 光线穿过材质后因自身阴影而可传播多远，不透明度越低，光线传播得越远。
* 阴影在材质上的柔和度，不透明度越低，阴影就越柔和，但柔和程度受限制。


[REGION:tip]
对于任何次表面材质，务必将不透明度设置为合理的值，例如 0.1。默认的不透明度为 1，这不会产生非常令人信服的次表面类型效果。
[/REGION]

## 局限性

另外，当前实现具有一些局限性：

* 尚不支持点光源阴影。
* 层叠阴影贴图会产生接缝。
* SSS 材质在足够接近阴影投射对象时，仍可接收到穿透完全不透明材质的泄露光线。
* 低不透明度所产生的柔和阴影在所支持的柔和度方面受限制，并且会产生锯齿。

