INTSourceChangelist:3108692
Availability: Public
Title:마티네 사용 안내서
Crumbs: %ROOT%, Engine, Engine/Matinee
Description:Matinee, 마티네 에디터를 사용하여 게임내 프로퍼티와 액터에 애니메이션을 주는 방법 안내서입니다.
Version: 4.9
SkillLevel:Beginner

[VAR:Topic]
[OBJECT:Topic]
	[PARAM:image]
		![%Engine/Matinee/UserGuide:title%](Engine/Matinee_topic.png)
	[/PARAM]
	[PARAM:icon]
		![](%ROOT%/cine_icon.png)(convert:false)
	[/PARAM]
	[PARAM:title]
		마티네 에디터
	[/PARAM]
	[PARAM:description]
		게임내 프로퍼티와 액터 애니메이션을 위한 마티네 에디터 사용 안내서입니다.
	[/PARAM]
	[PARAM:path]
		[RELATIVE:Engine/Matinee/UserGuide]
	[/PARAM]
[/OBJECT]
[/VAR]

[REGION:fullwidth]
![](MatineeOverview.png)(w:800)
[/REGION]

[TOC(start:2 end:2)]

## 마티네 시퀀스 만들기

마티네 시퀀스를 만들기 위해서는, 마티네 액터를 만든 다음 씬에 배치해 주면 됩니다. 그 방법은 두어가지 있습니다:

* 언리얼 에디터 상단에 있는 툴바에서 **마티네** 버튼을 클릭한 다음, **마티네 추가** 를 선택합니다.

	![](MatineeToolbar.png)

* 배치 모드 패널의 **모든 클래스** 아래에서 **마티네** 를 찾아 뷰포트에 끌어 놓습니다.


마티네 액터를 생성한 이후, 마티네 인터페이스를 통해 시네마틱을 변경하기 위해서는, **씬 아웃라이너** 나 
뷰포트에서 마티네 액터를 선택한 다음, **디테일** 패널에서 **Open Matinee** (마티네 열기)를 클릭합니다. 다른 방법으로는 
에디터 상단의 툴바에서 **마티네** 버튼을 클릭한 다음, 목록에서 자신의 마티네 액터를 선택하면 됩니다.

[REGION:note]
마티네의 키보드 단축키에 대한 키 설정을 변경하려면, **편집** 메뉴에서 **에디터 개인설정** 을 클릭한 다음 **키보드 단축키** 를 선택하면 됩니다. 
아래로 내려가 **마티네** 섹션을 펼친 다음 키를 설정하면 됩니다.
[/REGION]


### 그룹과 트랙 작업하기

마티네는 그룹 세트 아이디어 주변으로 구조화되었으며, 각각 여러 트랙 다수를 포함하고 있습니다. 그룹은 레벨의 특정 액터에 연관되어 있습니다.

트랙의 다양한 유형 및 트랙 사용법 관련 정보는, [](Engine\Matinee\TrackReference) 문서를 참고해 주시기 바랍니다.

### 새 그룹 만들기

마티네 시퀀스에서 새 그룹을 만들려면 먼저 변경하고픈 액터를 레벨에서 선택합니다. 그리고 마티네 좌하단의 회색 바에 우클릭하고 
'새 그룹 추가'를 선택합니다.

![New Group menu](Matinee_NewGroup.png)

새 그룹 이름을 넣으라는 창이 뜹니다. 이 마티네 시퀀스 내에서는 고유한 이름이어야 하며, 공백을 포함할 수 없습니다. OK를 선택하면 새 그룹 헤더가 보일것입니다. 
이제 블루프린트에서 마티네 액션을 보면, 방금 만든 그룹 이름으로 된 변수 핀이 새로 만들어진 걸 볼 수 있습니다. 
게다가 해당 그룹으로 작업하려는 액터로의 참조를 포함하고 있는 오브젝트 변수도 새로 딸려서요. 
다수의 액터를 같은 그룹 핀에 연결할 수도 있으며, 예를 들어 시간에 걸쳐 같은 식으로 여러개의 빛 밝기를 한꺼번에 조절하려는 경우에 매우 좋습니다.

그룹 헤더에 있는 작고 색깔있는 바는 '그룹 색' 에디터입니다. 씬의 어느 오브젝트가 마티네의 어느 그룹에 의해 조절되는지 식별해 볼 때, 
마티네의 여러가지 것들에 사용됩니다. 그룹을 선택하고 창 밑에 있는 GroupColor 프로퍼티를 조절하여 바꿀 수 있습니다. 
그룹 제목에 우클릭하면 전체 그룹을 지우거나 이름변경할 수 있습니다. 
그룹을 선택한 상태로 상/하 화살표 키를 누르면 목록 위/아래로 이동할 수 있어 비슷한 그룹을 함께 묶어놓는 데 유용합니다.

그룹(이나 그룹의 트랙)을 선택할 때마다 레벨의 액터가 선택되며, 반대의 경우도 동일함을 알아두시기 바랍니다.


### 새 트랙 만들기

그룹 자체로는 그에 대한 액터에 아무 작업도 하지 않습니다. 어떤 식으로든 실제로 변경하려면 해당 그룹에 트랙을 추가해야 합니다. 
그룹 헤더에 우클릭하면 새 트랙 메뉴가 뜨게 됩니다. 여기에 추가할 수 있는 마티네 트랙의 모든 클래스가 나열됩니다. 원하는 클래스를 선택하면 해당 그룹 내에 표시됩니다. 
트랙 클래스에 따라 추가되기 전에 추가 정보를 입력하라는 창이 뜨기도 합니다.

![New Track menu](Matinee_NewTrack.png)

(플로트 프로퍼티 트랙같은) 트랙 클래스는 같은 그룹에 여러개 있을 수 있는 반면, 몇몇 (이동 트랙같은) 트랙 클래스는 그룹마다 하나씩만 허용됩니다.

뷰포트에서 마티네에 트랙이 있는 액터를 선택하고, 마티네 에디터가 열려있는 상태라면, 마티네 에디터에 해당 액터의 트랙이 강조됩니다.

그룹에 있는 트랙을 전부 숨기고 싶으면 그룹 헤더에 있는 화살표를 눌러 '접을' 수 있습니다. 그룹 내 트랙의 순서도 그룹 이동과 같은 식으로 바꿀 수 있습니다. 
그냥 선택하고 상/하 화살표 키를 누르면 됩니다.

트랙의 영향은 트랙 이름 옆의 체크마크 박스를 사용하여 토글할 수 있습니다. 예로 다음 이미지에서 이동 트랙은 꺼지며 
마티네 시퀀스가 실행될 때 트랙의 효과도 보이지 않게 됩니다.

![Track view with Movement track disabled](Matinee_TrackDisabled.png)


### 키프레임

마티네용 콘트롤 선택 및 조작은 언리얼 엔진 4 의 다른 툴과 유사합니다.

키프레임에 클릭하면 재생 위치를 해당 키프레임으로 옮기고 마티네는 '녹화' 모드에 들어갑니다. 해당 트랙에 의해 제어되는 액터의 프로퍼티를 변경하면 
곧 키프레임 값도 변경됩니다. 키프레임을 편집할 때 마티네 정보 박스에 작고 빨간 원이 표시됩니다:

![Key recording indicator](Matinee_KeyMovement.png)

다른 위치로 문질러 가거나 재생을 시작하면 '녹화' 모드를 빠져나가게 되며, 씬의 액터에 대한 변경사항은 기억되지 않습니다.


### 시퀀스 길이 조절하기

시퀀스 길이 변경은 매우 직관적입니다. 그냥 시퀀스 끝을 나타내는 빨강 핸들을 잡아다가 시퀀스가 끝났으면 하는 곳에다가 떨구면 됩니다. 
시퀀스의 범위 밖에 키프레임이 있어도 어디 가거나 하지는 않으니 완전 안전입니다.

재생 위치를 삽입하려는 시간 지점으로 옮기고 '편집' 메뉴에서 '현위치에 여백 삽입'을 선택하면, 시퀀스의 특정 지점에 
시간을 추가할 수도 있습니다.


### 루프 섹션

마티네에서 녹색으로 반전된 지역은 '루프 섹션'입니다. 마티네에서 여러가지 용도로 활용되는데, 스크럽 바에 섹션의 시작과 끝을 마크하는 녹색 핸들을 
드래깅하여 조절할 수 있습니다.

'루프 미리보기 재생' 버튼을 누르면, 재생 위치가 루프 섹션의 시작으로 점프하며, 주욱 재생한 다음 다시 시작지점으로 되돌아갑니다. 
이를 통해 시퀀스의 작은 부분을 빠르게 돌려가며 딱 원하는 대로인가 확인해 볼 수 있습니다.

현재 루프 섹션을 새 길이로 '늘일' 수도 있습니다. 루프 섹션을 늘이고 싶은 만큼 늘이고, '편집' 메뉴에서 '섹션 늘이기'를 선택합니다. 
텍스트-항목 대화창에 섹션의 현재 길이가 표시되며, 원하는 대로 새 길이를 입력할 수 있습니다. 키프레임은 섹션의 새 길이에 걸쳐 재배치됩니다. 
편집 메뉴의 '섹션 지우기'를 선택하여 루프 섹션을 통째로 지워버릴 수도 있습니다.


## 뷰를 그룹에 고정하기

마티네에서 특히나 시네마틱을 만들 때, 에디터 뷰를 씬에서 제어하고 있는 액터 하나에 고정하는 것이 종종 도움이 됩니다. 
그룹 제목 바에 있는 **뷰 잠금** 버튼을 누르면, 원근 뷰포트가 해당 그룹에 의해 제어되는 
액터의 위치에 고정되게 됩니다. 시퀀스를 문질러 보면, 카메라가 그 오브젝트를 따라 이동하게 됩니다. 또한 에디터 
카메라를 움직일 때, 액터도 따라 이동시킵니다. 특정 오브젝트에 대한 키프레임을 다른 방향에서 보이도록 조절할 때 좋겠습니다.

디렉터 그룹에다 카메라를 고정시키면, 현재 '활성' 카메라를 통해 보이게 됩니다. 이를 통해 게임내에서 씬이 실제로 어때 보이는가 미리볼 수 있습니다. 
디렉터 그룹이 포함된 마티네 시퀀스를 열 때마다, 자동으로 원근 뷰포트가 '실시간' 모드로 전환되게 되며, 카메라는 디렉터 그룹에 고정됩니다.

디렉터 그룹을 추가시키면, 마티네 에디터 상단에서 찾을 수 있습니다. 디렉터 그룹의 아랫부분에는 타임라인이 들어있습니다.

[REGION:note]
마티네 시퀀스마다 디렉터 그룹은 딱 하나만 있을 수 있습니다.
[/REGION]

## 카메라 액터

시네마틱 시퀀스를 만들 때, 레벨에 놓은 카메라 액터를 사용하면 큰 도움이 될 수 있습니다. 그룹이 있으면 어느 액터를 통해서건 볼 수는 있지만, 
카메라 액터는 플로트 프로퍼티 트랙을 사용하여 카메라 FOV와 상 비율같은 부가 프로퍼티 콘트롤이 가능하며, 에디터에서 카메라 뷰 절두체(frustum)를 그림으로 미리볼 수도 있습니다.

[](Engine/UI/ClassViewer) 를 열고 액터 클래스 계층구조에서 CameraActor를 선택하고서 레벨에 우클릭, 'CameraActor 여기에 추가'를 선택하여 레벨에 
카메라 액터를 놓을 수 있습니다.

레벨에 있는 카메라 액터입니다:

![Camera Actor](camera_actor.jpg)

카메라 메시와 뷰 절두체는 에디터에서만 나타나며, 게임에서는 나오지 않습니다. 마티네에서 문질러 이동해 보면 활성 카메라 절두체는 노랗게 반전됩니다. 
각 카메라 절두체는 그룹 에디터 색으로 그려져 어느 그룹이 어느 카메라를 제어하는 중인지 쉽게 알아볼 수 있습니다.

_Constrain Aspect Ratio_ (종횡비 제한)이 _True_ 로 설정된 카메라 액터를 통해 볼 때, 화면 모양을 유지하기 위해 뷰포트에 검정 막대 부분이 추가되게 됩니다. 
에디터에서 뷰가 현재 카메라 액터에 고정되어 있을 때만 추가되게 됩니다.


## 마티네 리플리케이션

bClientSideOnly (클라이언트 전용 옵션)이 _False_ 로 설정된 마티네 오브젝트는 자동으로 서버에서 클라이언트로 리플리케이트됩니다. 액션이 서버에서 활성화될 때마다 
서버는 해당 정보를 클라이언트에 전송하여 싱크를 유지합니다.

이 자동 리플리케이션은 bStatic 또는 bNoDelete 설정이 되어있는 (즉 언리얼 에디터 내 레벨에 놓인) 액터만 다루며 마티네로 연결된 오브젝트 변수는 
(다른 액션을 통한 실행시간 연결이 아닌) 언리얼 에디터의 해당 오브젝트로 설정되어 있어야 합니다. 이런 경우에 해당되지 않는 액터는 자체 블루프린트나 C++ 리플리케이션 
코드를 사용하여 마티네에 의한 변경사항을 자체적으로 리플리케이트시켜야 합니다.


## 시네마틱

게임내 시네마틱 시퀀스가 여럿 있는데 라이트 인바이언먼트(light environment) 셋업을 이용한 캐릭터 라이팅이 너무 기초적이라 모델을 제대로 살리지 못하는 경우가 있습니다. 
이 경우 커스텀 라이팅 채널 (가끔은 캐릭터별 빛의 양을 조절하기 위해 개별 캐릭터마다 별개의 라이팅 채널), 
클로즈업 샷 도중 캐릭터를 비출 커스텀 다이내믹 라이트 등을 사용할 수 있습니다.

이런 시퀀스에 대해서는 더 나아보이기도 하고 더욱 세밀한 조절이 가능하기에 실제 다이내믹 라이트를 사용할 수 있습니다만 아주 조금만 사용해야할 것이며, 
그림자를 드리울 용도라면 딱 하나만 써야 할 것입니다.

퍼포먼스 상으로는 약간의 차이가 있으나, 시네마틱에는 더 느려지게 만들 게임플레이가 없기에 걱정하지 않아도 됩니다. 콘솔에서 부드럽게 돌아가게 하기 위해서는, 
렙디가 시네마틱 맵을 약간 최적화시켜 줘야 할 수도 있습니다. 대부분의 경우 컷 씬의 모든 스태틱 지오메트리는 (캐릭터가 서있는 땅에 그림자를 드리우려면 
실제 라이팅이 필요하니 제외하고) 계속 라이트맵을 사용해도 되겠습니다.


## 마티네 데이터 임포트와 익스포트

마티네는 다른 3D 콘텐츠 제작 프로그램에서 로드할 수 있는  FBX / COLLADA 파일로 전체 마티네 시퀀스를 익스포트할 수 있는 '익스포트' 및 '임포트' 메뉴 옵션이 있습니다. 
이를 통해 액터와 카메라의 이동 혹은 모션 블러 양이나 카메라 시야같은 기타 프로퍼티까지도 애니메이트할 수 있는 외부 프로그램을 사용할 수 있습니다. 
씬의 많은 면을 익스포트해서 애니메이팅되는 시퀀스 작업시 월드 지오메트리를 시각화시켜 볼 수도 있습니다.

마티네 시퀀스를 익스포트할 때, 언리얼 에디터는 대부분의 씬 지오메트리를 애니메이션 커브 데이터를 포함하여 익스포트하려 합니다.

익스포트되는 데이터는 다음과 같습니다:


* 마티네 시퀀스에 묶인 카메라
* 마티네 시퀀스에 묶인 액터
    * 특정 트랙에 대한 애니메이션 커브
    * 이동 트랙
* 플로트 프로퍼티 트랙
* 현재 레벨의 라이트 전부
* 현재 레벨의 스태틱 메시 전부 (폴리곤, 브러시 지오메트리, 머티리얼 포함)
* 현재 레벨의 에미터 전부 (배치 큐만)


랜드스케이프 액터, 소스 브러시 모델, 기타 특정 오브젝트 유형 등은 현재 익스포트 지원되지 않으니 유의하십시오.

익스포트한 오브젝트 이름은 언리얼 에디터에서의 이름과 비슷해 집니다. 3D 모델링 패키지에서 데이터를 변경한 후에는, 변경사항을 다시 FBX / COLLADA 파일로 익스포트해야 
마티네로 임포트할 수 있을 것입니다. 중요한 점은 이 과정에서 씬의 오브젝트 이름을 그대로 유지해야 한다는 것입니다.

새 FBX / COLLADA 파일을 에디터로 다시 임포트할 때, 마티네는 임포트한 액터의 이름이 활성 마티네 시퀀스에 묶인 액터와 일치하는 액터의 애니메이션 커브 전부를 임포트하려 합니다. 
(카메라와 같이) 몇몇 경우에, 모델링 패키지에서 새 오브젝트를 만드는 식으로 추가하여 FBX / COLLADA 포맷으로 익스포트할 수도 있습니다.


## 키 감소

편집 탭에서 찾을 수 있는 키 감소 툴은 한 트랙의 애니메이션 커브에 있는 불필요 키를 쉽게 제거할 수 있는 툴입니다. 키가 여럿 있는 커브를 가진 트랙이 있는데, 
이게 거의 직선일 수가 있습니다. 그런 경우 정말로 필요한 것은 첫 키와 마지막 키 뿐입니다. 키 감소 툴로 중간 키를 제거하여 
불필요한 계산과 메모리 차지량을 줄일 수 있습니다.

![Key Reduction tool](KeyReduction.png)

툴에 있는 프로퍼티는:

| 항목 | 설명 |
| ---- | ---- |
| **Tolerance** | 허용치 - 직선을 이루는 키 사이 거리가 이 이상 벌어지면 제거됩니다. |
| **Full interval** | 최대 주기 - _True_ 면 트랙 키의 최대 주기가 키 감소에 사용됩니다. |
| **Interval Start** | 주기 시작 - 키 감소를 시작할 시간을 설정합니다. |
| **Interval End** | 주기 끝 - 키 감소를 끝낼 시간을 설정합니다. |

## 블루프린트에서 마티네 시퀀스 제어하기

마티네 시퀀스 재생은 블루프린트 그래프에서 함수 호출을 통해 합니다. 이 방법은 보통 레벨 블루프린트에서 이루어지는데, 레벨에 시네마틱이나 애니메이션 요소를 추가하기 위해서입니다.

**마티네 시퀀스를 재생하려면:**

1. 씬 아웃라이너에서 재생하고자 하는 시퀀스가 들어있는 마티네 액터를 선택합니다.

1. 레벨 블루프린트를 엽니다. 블루프린트가 그래프 모드에 있는지 확인합니다.

1. 마티네 액터를 선택해 둔 상태로 레벨 블루프린트에서 그래프에 우클릭합니다. 뜨는 맥락 메뉴에서 **Call Function on 자신의 마티네 이름** 의 **Cinematic** 섹션을 펼친 다음 
**Play** 를 클릭합니다. (다른 방법으로는, 맥락 메뉴에서 "play" 라 입력하면 필터가 적용된 결과가 나타나고, 거기서 **Play** 를 선택합니다.) 
**Play** 노드에 **Matinee Actor** 노드가 이미 붙은 상태로 나타납니다.

	![](Matinee_Play.png)

1. Play 함수를 발동시키는 데 어떤 종류의 이벤트를 사용하려는지 결정합니다. 예를 들어 Begin Play 이벤트를 사용할 수 있겠습니다. 이벤트를 추가하고, 그 출력 실행 핀을 Play 노드의 
입력 실행 핀에 걸어줍니다.

	![](Matinee_EventBeginPlay.png)

1. 레벨 블루프린트를 컴파일하고 레벨을 저장합니다.

개별 함수 노드를 사용해서 마티네 액터를 가지고 다음과 같은 작업을 할 수도 있습니다:

* **Change Playback Direction** 재생 방향 변경
* **Pause** 일시정지
* **Reverse** 역순
* **Set Looping State** 루핑 상태 설정
* **Set Position** 위치 설정
* **Stop** 중지

**팔레트** 의 **Matinee** (마티네) 아래에서 이 함수 노드들을 찾아볼 수 있습니다.

<!----For more information about Matinee and Blueprints, see *link*.----->

