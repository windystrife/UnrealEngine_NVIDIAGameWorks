INTSourceChangelist:3208714
Availability:Public
Title:スケルトン ツリー
Crumbs: %ROOT%, Engine, Engine/Animation, Engine/Animation/Persona
Description:スケルトン エディタ内のスケルトン ツリーのユーザーガイド 
version:4.14
related:Engine/Content\Types\SkeletalMeshes\Sockets
related:Engine/Animation/AnimationRetargeting

[VAR:Topic]
[OBJECT:Topic]
	[PARAM:image]
		![%Engine/Animation/Persona/SkeletonTree:title%](Engine/Animation/animation_topic.png)
	[/PARAM]
	[PARAM:icon]
		![](%ROOT%/content_icon.png)(convert:false)
	[/PARAM]
	[PARAM:title]
		%Engine/Animation/Persona/SkeletonTree:title%
	[/PARAM]
	[PARAM:description]
		%Engine/Animation/Persona/SkeletonTree:description%
	[/PARAM]
	[PARAM:path]
		[RELATIVE:Engine/Animation/Persona/SkeletonTree]
	[/PARAM]
[/OBJECT]
[/VAR]

![](SkeletonTree.png)  

[EXCERPT:Overview]
**[Skeleton Tree (スケルトン ツリー)]** パネルには、現在の [スケルトン](Engine/Animation/Skeleton) アセットのスケルタル階層が表示されます。階層内では、以下の操作を行うことが可能です。 

* スケルタル階層で特定のボーンの選択および表示
* プロップやその他のアイテムのボーン オフセットの適用ポイントとなる [ソケット](Engine/Content\Types\SkeletalMeshes\Sockets) の作成および編集
* プレビュー アセットの作成。このアセットは一時的に適用されるアセットで、例えばキャラクター上で武器がどのように見えるかをプレビューする場合などに便利です。
* [アニメーションのリターゲット](Engine/Animation/AnimHowTo/Retargeting)の操作設定 (**[Show Advanced Options]** にチェックが入っている場合)。
[/EXCERPT:Overview]

## インターフェースの内容

![](SkeletonTree_UIBreakdown.png)

1. [検索欄](#検索欄)
1. [ボーンの階層リスト](#ボーン階層リスト)
1. [ブレンドのプロファイルとスケルトンのオプション](#ブレンドプロファイルとスケルトンオプション) 


### 検索欄

![](SearchLine.png)

**検索** 欄では、スケルタル階層を迅速にフィルタリングすることができます。これは、入力されたテキストを含む名前で階層をフィルタリングして行います。 

![](SeachFiltering.png)

[REGION:caption]
上の図では、**Spine** というテキストを含むボーン名、ソケット、またはプレビュー オブジェクトのみになるように階層をフィルタリングしました。 
[/REGION]

### ボーン階層リスト

![](BoneHierarchyList.png)

このウィンドウには、選択した Skeleton アセットが現在使用しているすべてのボーン、ソケット、プレビュー オブジェクトが表示されています。 
このウィンドウ内では、ソケットやプレビュー オブジェクトを追加したり、割り当てたり、移動のリターゲット オプションを調整することができます。 
ボーン階層リストに加えられるほとんどの調整は、**右クリック** のコンテキストメニューから行うことができます。このメニューのオプションは右クリックしたオブジェクトに応じて変化します (以下のコンテキスト メニューのセクションを参照)。

####ボーン コンテキスト メニュー

ボーンを **右クリック** すると、以下のコンテキスト メニューが表示されます。

![](SkeletonContextMenu_Bone.png)

|**名前**|**説明**|
|---|---|
|[REGION:tablesection]ソケットのアクション[/REGION]||
| **Add Socket** | 選択中のボーンへ新規のソケットを追加します。**スケルトンツリー** の上部付近にあるボタンを使用してソケットを非表示にすると、オプションはグレイアウトで表示されます。 |
|**Paste Selected Socket** | ソケットをクリップボードにコピーしている場合 (**右クリック** して [Copy Selected Socket] を選択) 、選択中のボーンにそのソケットを貼り付けます。|
|[REGION:tablesection]選択したボーンのアクション[/REGION]||
| **Copy Selected Bone Names** | 選択したボーンの名前をクリップボードへコピーします。この機能は複雑なボーンの名前をプロパティ欄へ入力する際に便利です。 |
| [REGION:tablesection]ボーンの移動リターゲット[/REGION]||
|**Recursively Set Translation Retargeting Skeleton**| ボーンとその子ボーンを全て再帰的に設定し、スケルトンに合わせて Translation Retargeting を使用します。[移動のリターゲット制御](#移動のリターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting Animation**| ボーンとその子ボーンを全て再帰的に設定し、アニメーションに合わせて Translation Retargeting を使用します。[移動のリターゲット制御](#移動のリターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting AnimationScaled**| ボーンとその子ボーンを全て再帰的に設定し、スケーリングしたアニメーションに合わせて Translation Retargeting を使用します。[移動のリターゲット制御](#移動のリターゲット制御) をご覧ください。
|**Recursively Set Translation Retargeting AnimationRelative**| ボーンとその子ボーンを全て再帰的に設定し、アニメーションに合わせて Translation Retargeting を使用します。[移動のリターゲット制御](#移動のリターゲット制御) をご覧ください。
| [REGION:tablesection]LOD ボーンの削減[/REGION]||
|**Remove Selected Bone from...**| 選択中のボーンとその子ボーンを LOD 設定の特定の LOD レベルに対する Bones to Remove リストに配置します。詳細は LOD 設定をご覧ください。|
|**Add Remove Selected Bone to...**| 選択中のボーンを、指定した LOD レベルに対する Bones to Remove リストから除去します。詳細は LOD 設定をご覧ください。|
| [REGION:tablesection]適用アセットのアクション[/REGION]||
|**Add Preview Asset**| プレビュー目的でボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、ボーンに適用したアーマーの外観を知りたい場合に、このオプションを使用します。ただし、これは永久的な適用ではなく、プレビュー中のみ見えることにご注意ください。 |

### ソケット コンテキスト メニュー

[ソケット](Engine/Content\Types\SkeletalMeshes\Sockets) を **右クリック** すると、以下のコンテキストメニューが表示されます。

![](SkeletonContextMenu_Socket.png)

|**名前**|**説明**|
|---|---|
| [REGION:tablesection]選択項目のアクション[/REGION]||
| **Delete** | 選択したソケットを削除します。  |
|[REGION:tablesection]選択ソケットのアクション[/REGION]||
|**Copy Selected Sockets**| 選択中のソケットをクリップボードにコピーして他のボーンに貼り付けられるようにします。|
| **Rename Socket** | 選択したソケットの名前を変更することが出来ます。
|**Create Mesh Socket**| Skeleton アセットから使用中の特定のスケルタル メッシュ上にソケットをコピーします。このようにソケットは同じスケルトン アセットを使用するキャラクターに対して編集できますが、異なるメッシュ比率を持ちます。|
|**Delete Mesh Socket** | メッシュ ソケット内に作成されたソケットを **右クリック** した時のみ利用することができます。Skeleton アセットのオリジナル ソケットのみを残して、ソケットのメッシュのコピーを取り除きます。|
| [REGION:tablesection]適用アセットのアクション[/REGION]||
|**Add Preview Asset**| プレビュー目的でボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、ボーンに適用したアーマーの外観を知りたい場合に、このオプションを使用します。ただし、これは永久的な適用ではなく、プレビュー中のみ見えることにご注意ください。 |
|**Remove All Attached Assets**| 適用されているすべての Preview アセットをソケットから取り除きます。|


### Preview Asset コンテキスト メニュー

**Preview アセット** はスタティック メッシュやスケルタル メッシュなど、プレビュー目的でボーンやソケットに一時的に適用されているアセットです。

Preview アセットを **右クリック** すると、以下のコンテキスト メニューが表示されます。


![](SkeletonContextMenu_PreviewAsset.png)

|**名前**|**説明**|
| --- | --- |
|[REGION:tablesection]選択アセットのアクション[/REGION]||
|**Delete**| 選択中の Preview アセットを削除します。|
| [REGION:tablesection]適用されたアセット アクション[/REGION]||
|**Add Preview Asset**| プレビュー目的でボーンへの一時的な適用が可能な全てのアセットのメニューを開きます。例えば、特定のアーマーをボーンにアタッチした状態を見てみたい時など、このオプションを使用してください。ただし、これは永久的な適用ではなく、プレビュー中のみ見えることにご注意ください。 |
|**Remove All Preview Assets**| 現在メッシュ上にある全ての Preview アセットをすべて削除します。|


## ブレンド プロファイルとスケルトン オプション

![](BlendProfileSection.png)

スケルトン ツリー ウィンドウ下部に、ブレンド プロファイルとスケルトン オプションのボタンがあります。 

### ブレンド プロファイル

ブレンド プロファイルは、ボーン毎のスケールのセットです。遷移やブレンド リストで使用し、特定のボーンのウェイトを微調整することができます。 
スケールは、ボーンに対する通常のウェイトに適用されます。 
ドロップダウン メニューからブレンド プロファイルを作成 / 名前付けして、ブレンド プロファイルのスケール設定で、ボーン毎のスケールを各ボーンの隣で指定します。

![](BlendProfile.png)

### スケルトンのオプション

![](SkeletonOptionsWindow.png)

スケルトンのオプション ウィンドウでは、スケルトンのリターゲットのオプションとボーンとソケットを表示したり、非表示にしたりすることができます。 

#### 移動のリターゲット制御

**Skeleton Options** メニューから **Show Retargeting Options** を有効にした状態で、Bone Hierarchy ウィンドウが更新されてのオプションが追加されます。 
**スケルトンツリー** のボタンの右カラムで、スケルタルメッシュ上の移動の [リターゲット](Engine/Animation/AnimationRetargeting)の操作をコントロールすることができます。ドロップダウンで、スケルトンのボーン情報、アニメーション回転データ、スケーリングされたキャラクターに適用するアニメーションなど、何をリターゲットの基礎として使用するかを指定することができます。

それぞれのドロップダウンで、特定のボーンがどのようにリターゲットを扱うのか、リターゲットのベースとして何を使うのかを制御できます。 

![](RetargetingControls.png)

各ボタンには以下の 3 つのオプションがあります。 

[REGION:note]
**右クリック** してコンテキストメニューから recursive コマンドを選択して、選択したボーンのそれぞれの子を再帰的に設定変更することも出来ます。
[/REGION]

|名前|説明|
|---|---|
|**Animation**| アニメーションから移動を使用します。|
|**Skeleton**| スケルトンから移動を使用します。|
|**AnimationScaled**| アニメーション、スケルトンの比率によるスケール長から移動を使用します。 |
|**AnimationRelative**|加算アニメーションのようにアニメーションから相対的な移動を使用します。 |

#### ボーンとソケットの表示 / 非表示

**[スケルトン オプション]** メニューの **ボーン** と **ソケット** のセクションは様々なボーンとソケットのタイプの表示操作に使用します。 

[REGION:raw]
![](BonesMenu.png)
[/REGION]

| オプション					| 説明														|
|---------------------------|-------------------------------------------------------------------|
|**Show All Bones**			| スケルトンで利用できる全てのボーンを表示します。						|
|**Show Mesh Bones**		| このスケルタル メッシュ限定のボーンを表示します。	|
|**Show Weighted Bones**	| 重み付けされた頂点をもつボーンのみ表示します。		|
|**Hide Bones**				| ボーンをすべて非表示にして、ソケットとプレビュー アセットのみを表示します。			|

[REGION:raw]
![](SocketsMenu.png)
[/REGION]


| オプション | 説明 |
|---|---|
|**Show Active Sockets**	| アクティブなソケットのみを表示します。ソケットをカスタマイズすると (**右クリック** して [Customize Socket] を選択)、ソケットはスケルトンからメッシュへコピーされます。そして、このスケルタルメッシュ専用の特別なソケットが作成され、同じスケルトンを使用する他のスケルタル メッシュはこのソケットを共有しません。この設定を行うと、メッシュ ソケットとも呼ばれるカスタム仕様の新しいソケットがアクティブになり、Skeleton アセットの一部として残っているオリジナルのソケットは非アクティブとなります。実際、これにより、カスタマイズされたメッシュ ソケットのオリジナルのソケットは全て非表示になります。 |
|**Show Mesh Sockets**		| カスタマイズされたソケットのうち、そのスケルタル メッシュ専用で、このソケットで Skeleton アセットを共有する他のスケルタル メッシュからは使用されないソケットのみを表示します。 |
|**Show Skeleton Sockets**	| カスタマイズされていないソケット、つまり、スケルトン アセットの一部でこのスケルタル メッシュ限定ではないソケットのみを表示します。 |
|**Show All Sockets**		|スケルタル メッシュ上で利用できる全てのソケットを表示します。 |
|**Hide Sockets**			| 全てのソケットを非表示にします。 |




